<?php exit();?>a:4:{s:7:"project";a:48:{s:7:"entitle";s:4:"News";s:6:"banner";b:0;s:2:"id";s:2:"43";s:9:"parent_id";s:1:"0";s:7:"site_id";s:1:"1";s:6:"module";s:2:"22";s:4:"cate";s:1:"7";s:5:"title";s:12:"资讯中心";s:10:"nick_title";s:0:"";s:5:"taxis";s:2:"12";s:6:"status";s:1:"1";s:9:"tpl_index";s:0:"";s:8:"tpl_list";s:0:"";s:11:"tpl_content";s:0:"";s:13:"is_identifier";s:1:"1";s:3:"ico";s:22:"images/ico/article.png";s:7:"orderby";s:37:"l.sort DESC,l.dateline DESC,l.id DESC";s:11:"alias_title";s:12:"新闻主题";s:10:"alias_note";s:0:"";s:5:"psize";s:2:"20";s:3:"uid";s:1:"0";s:10:"identifier";s:4:"news";s:9:"seo_title";s:0:"";s:12:"seo_keywords";s:0:"";s:8:"seo_desc";s:0:"";s:9:"subtopics";s:1:"0";s:9:"is_search";s:1:"1";s:6:"is_tag";s:1:"1";s:6:"is_biz";s:1:"0";s:9:"is_userid";s:1:"1";s:14:"is_tpl_content";s:1:"0";s:6:"is_seo";s:1:"1";s:11:"currency_id";s:1:"0";s:10:"admin_note";s:0:"";s:6:"hidden";s:1:"0";s:11:"post_status";s:1:"0";s:14:"comment_status";s:1:"1";s:8:"post_tpl";s:0:"";s:10:"etpl_admin";s:0:"";s:9:"etpl_user";s:0:"";s:18:"etpl_comment_admin";s:0:"";s:17:"etpl_comment_user";s:0:"";s:7:"is_attr";s:1:"1";s:3:"tag";b:0;s:13:"cate_multiple";s:1:"0";s:8:"biz_attr";s:1:"0";s:7:"freight";s:1:"0";s:3:"url";s:33:"http://zx.local/index.php?id=news";}s:4:"cate";a:15:{s:2:"id";s:2:"68";s:7:"site_id";s:1:"1";s:9:"parent_id";s:1:"7";s:6:"status";s:1:"1";s:5:"title";s:12:"赛事预告";s:5:"taxis";s:2:"15";s:8:"tpl_list";s:0:"";s:11:"tpl_content";s:0:"";s:5:"psize";s:1:"0";s:9:"seo_title";s:0:"";s:12:"seo_keywords";s:0:"";s:8:"seo_desc";s:0:"";s:10:"identifier";s:5:"match";s:3:"tag";s:0:"";s:3:"url";s:44:"http://zx.local/index.php?id=news&cate=match";}s:5:"total";s:1:"3";s:6:"rslist";a:3:{i:1885;a:28:{s:2:"id";s:4:"1885";s:9:"parent_id";s:1:"0";s:7:"cate_id";s:2:"68";s:9:"module_id";s:2:"22";s:10:"project_id";s:2:"43";s:7:"site_id";s:1:"1";s:5:"title";s:43:"2018年全国青少年国际跳棋锦标赛";s:8:"dateline";s:10:"1529904392";s:4:"sort";s:1:"0";s:6:"status";s:1:"1";s:6:"hidden";s:1:"0";s:4:"hits";s:1:"4";s:3:"tpl";s:0:"";s:9:"seo_title";s:0:"";s:12:"seo_keywords";s:0:"";s:8:"seo_desc";s:0:"";s:3:"tag";s:0:"";s:4:"attr";s:0:"";s:9:"replydate";s:1:"0";s:7:"user_id";s:1:"0";s:10:"identifier";s:0:"";s:8:"integral";s:1:"0";s:5:"thumb";b:0;s:4:"note";s:11:"7/21 - 7/24";s:7:"content";s:50:"<p>2018年全国青少年国际跳棋锦标赛</p>";s:8:"catelist";a:1:{i:68;a:4:{s:7:"cate_id";s:2:"68";s:5:"title";s:12:"赛事预告";s:10:"identifier";s:5:"match";s:3:"url";s:44:"http://zx.local/index.php?id=news&cate=match";}}s:4:"cate";a:4:{s:7:"cate_id";s:2:"68";s:5:"title";s:12:"赛事预告";s:10:"identifier";s:5:"match";s:3:"url";s:44:"http://zx.local/index.php?id=news&cate=match";}s:3:"url";s:33:"http://zx.local/index.php?id=1885";}i:1371;a:28:{s:2:"id";s:4:"1371";s:9:"parent_id";s:1:"0";s:7:"cate_id";s:2:"68";s:9:"module_id";s:2:"22";s:10:"project_id";s:2:"43";s:7:"site_id";s:1:"1";s:5:"title";s:32:"MySQL安装后需要调整什么";s:8:"dateline";s:10:"1424918471";s:4:"sort";s:1:"0";s:6:"status";s:1:"1";s:6:"hidden";s:1:"0";s:4:"hits";s:2:"46";s:3:"tpl";s:0:"";s:9:"seo_title";s:0:"";s:12:"seo_keywords";s:0:"";s:8:"seo_desc";s:0:"";s:3:"tag";s:5:"mysql";s:4:"attr";s:17:"n,h,c,f,a,s,b,p,j";s:9:"replydate";s:10:"1523947003";s:7:"user_id";s:1:"0";s:10:"identifier";s:0:"";s:8:"integral";s:1:"0";s:5:"thumb";b:0;s:4:"note";s:292:"面对MySQL的DBA或者做MySQL性能相关的工作的人，我最喜欢问的问题是，在MySQL服务器安装后，需要调整什么，假设是以缺省的设置安装的。

我很惊讶有非常多的人没有合理的回答，很多的MySQL服务器都在缺省的配置下运行。";s:7:"content";s:5769:"<p><img src="res/201806/19/auto_1318.jpg" title="grass-blades" alt="grass-blades"/></p><p>面对MySQL的DBA或者做MySQL性能相关的工作的人，我最喜欢问的问题是，在MySQL服务器安装后，需要调整什么，假设是以缺省的设置安装的。</p><p>我很惊讶有非常多的人没有合理的回答，很多的MySQL服务器都在缺省的配置下运行。</p><p>尽管可以调整非常多的MySQL服务器变量，但是在通常情况下只有少数的变量是真正重要的。在设置完这些变量以后，其他变量的改动通常只能带来相对有限的性能改善。</p><p><strong>key_buffer_size</strong>：非常重要，如果使用MyISAM表。如果只使用MyISAM表，那么把它的值设置为可用内存的30%到40%。恰当的大小依赖索引的数量、数据量和负载 ----记住MyISAM使用操作系统的cache去缓存数据，所以也需要为它留出内存，而且数据通常比索引要大很多。然而需要查看是否所有的 key_buffer总是在被使用 ---- key_buffer为4G而.MYI文件只有1G的情况并不罕见。这样就有些浪费了。如果只是使用很少的MyISAM表，希望它的值小一些，但是仍然至少要设成16到32M，用于临时表（占用硬盘的）的索引。</p><p><strong>innodb_buffer_pool_size</strong>：非常重要，如果使用Innodb表。相对于MyISAM表而言，Innodb表对buffer size的大小更敏感。在处理大的数据集（data set）时，使用缺省的key_buffer_size和innodb_buffer_pool_size，MyISAM可能正常工作，而Innodb可能就是慢得像爬一样了。同时Innodb buffer pool缓存了数据和索引页，因此不需要为操作系统的缓存留空间，在只用Innodb的数据库服务器上，可以设成占内存的70%到80%。上面 key_buffer的规则也同样适用 ---- 如果只有小的数据集，而且也不会戏剧性地增大，那么不要把innodb_buffer_pool_size设得过大。因为可以更好地使用多余的内存。</p><p><br/></p><p><strong>innodb_additional_pool_size</strong>：这个变量并不太影响性能，至少在有像样的（decent）内存分配的操作系统中是这样。但是仍然需要至少设为20MB（有时候更大），是Innodb分配出来用于处理一些杂事的。</p><p><strong>innodb_log_file_size</strong>：对于以写操作为主的负载(workload)非常重要，特别是数据集很大的时候。较大的值会提高性能，但增加恢复的时间。因此需要谨慎。我通常依据服务器的大小（server size）设置为64M到512M。</p><p><strong>innodb_log_buffer_size</strong>：缺省值在中等数量的写操作和短的事务的大多数负载情况下是够用的。如果有大量的UPDATE或者大量地使用blob，可能需要增加它的值。不要把它的值设得过多，否则会浪费内存--log buffer至少每秒刷新一次，没有必要使用超过一秒钟所需要的内存。8MB到16MB通常是足够的。小一些的安装应该使用更小的值。</p><p><strong>innodb_flush_logs_at_trx_commit</strong>：为Innodb比MyISAM慢100倍而哭泣？可能忘记了调整这个值。缺省值是1，即每次事务提交时都会把日志刷新到磁盘上，非常耗资源，特别是没有电池备份的cache时。很多应用程序，特别是那些从MyISAM表移植过来的，应该把它设成2。意味着只把日志刷新到操作系统的cache，而不刷新到磁盘。此时，日志仍然会每秒一次刷新到磁盘上，因此通常不会丢失超过1到2秒的更新。设成0会更快一些，但安全性差一些，在MySQL服务崩溃的时候，会丢失事务。设成2只会在操作系统崩溃的时候丢失数据。</p><p><br/></p><p><strong>table_cache</strong>：打开表是昂贵的（耗资源）。例如，MyISAM表在MYI文件头做标记以标明哪些表正在使用。您不会希望这样的操作频繁发生，通常最好调整cache 大小，使其能够满足大多数打开的表的需要。它使用了一些操作系统的资源和内存，但是对于现代的硬件水平来说通常不是问题。对于一个使用几百个表的应用， 1024是一个合适的值（注意每个连接需要各自的缓存）。如果有非常多的连接或者非常多的表，则需要增大它的值。我曾经看到过使用超过100000的值。</p><p><br/></p><p><strong>thread_cache</strong>：线程创建/销毁是昂贵的，它在每次连接和断开连接时发生。我通常把这个值至少设成16。如果应用有时会有大量的并发连接，并且可以看到 threads_created变量迅速增长，我就把它的值调高。目标是在通常的操作中不要有线程的创建。</p><p><strong>query_cache</strong>：如果应用是以读为主的，并且没有应用级的缓存，那么它会有很大帮助。不要把它设得过大，因为它的维护可能会导致性能下降。通常会设置在32M到 512M之间。设置好后，经过一段时间要进行检查，看看是否合适。对于某些工作负载，缓存命中率低于会就启用它。</p><p>注意：就像看到的，上面所说的都是全局变量。这些变量依赖硬件和存储引擎的使用，而会话级的变量（per session variables）则与特定的访问量(workload)相关。如果只是一些简单的查询，就没有必要增加sort_buffer_size，即使有 64G的内存让您去浪费。而且这样做还可能降低性能。我通常把调整会话级的变量放在第二步，在我分析了访问量（或负载）之后。</p><p>此外在MySQL分发版中包含了一些my.cnf文件的例子，可以作为非常好的模板去使用。如果能够恰当地从中选择一个，通常会比缺省值要好。</p>";s:8:"catelist";a:1:{i:68;a:4:{s:7:"cate_id";s:2:"68";s:5:"title";s:12:"赛事预告";s:10:"identifier";s:5:"match";s:3:"url";s:44:"http://zx.local/index.php?id=news&cate=match";}}s:4:"cate";a:4:{s:7:"cate_id";s:2:"68";s:5:"title";s:12:"赛事预告";s:10:"identifier";s:5:"match";s:3:"url";s:44:"http://zx.local/index.php?id=news&cate=match";}s:3:"url";s:33:"http://zx.local/index.php?id=1371";}i:1370;a:28:{s:2:"id";s:4:"1370";s:9:"parent_id";s:1:"0";s:7:"cate_id";s:2:"68";s:9:"module_id";s:2:"22";s:10:"project_id";s:2:"43";s:7:"site_id";s:1:"1";s:5:"title";s:17:"MySQL出错代码";s:8:"dateline";s:10:"1424918437";s:4:"sort";s:1:"0";s:6:"status";s:1:"1";s:6:"hidden";s:1:"0";s:4:"hits";s:2:"54";s:3:"tpl";s:0:"";s:9:"seo_title";s:0:"";s:12:"seo_keywords";s:0:"";s:8:"seo_desc";s:0:"";s:3:"tag";s:0:"";s:4:"attr";s:0:"";s:9:"replydate";s:1:"0";s:7:"user_id";s:1:"0";s:10:"identifier";s:0:"";s:8:"integral";s:1:"0";s:5:"thumb";b:0;s:4:"note";s:0:"";s:7:"content";s:3059:"<p>1005：创建表失败</p><p>1006：创建数据库失败</p><p>1007：数据库已存在，创建数据库失败</p><p>1008：数据库不存在，删除数据库失败</p><p>1009：不能删除数据库文件导致删除数据库失败</p><p>1010：不能删除数据目录导致删除数据库失败</p><p>1011：删除数据库文件失败</p><p>1012：不能读取系统表中的记录</p><p>1020：记录已被其他用户修改</p><p>1021：硬盘剩余空间不足，请加大硬盘可用空间</p><p>1022：关键字重复，更改记录失败</p><p>1023：关闭时发生错误</p><p>1024：读文件错误</p><p>1025：更改名字时发生错误</p><p>1026：写文件错误</p><p>1032：记录不存在</p><p>1036：数据表是只读的，不能对它进行修改</p><p>1037：系统内存不足，请重启数据库或重启服务器</p><p>1038：用于排序的内存不足，请增大排序缓冲区</p><p>1040：已到达数据库的最大连接数，请加大数据库可用连接数</p><p>1041：系统内存不足</p><p>1042：无效的主机名</p><p>1043：无效连接</p><p>1044：当前用户没有访问数据库的权限</p><p>1045：不能连接数据库，用户名或密码错误</p><p>1048：字段不能为空</p><p>1049：数据库不存在</p><p>1050：数据表已存在</p><p>1051：数据表不存在</p><p>1054：字段不存在</p><p>1065：无效的SQL语句，SQL语句为空</p><p>1081：不能建立Socket连接</p><p>1114：数据表已满，不能容纳任何记录</p><p>1116：打开的数据表太多</p><p>1129：数据库出现异常，请重启数据库</p><p>1130：连接数据库失败，没有连接数据库的权限</p><p>1133：数据库用户不存在</p><p>1141：当前用户无权访问数据库</p><p>1142：当前用户无权访问数据表</p><p>1143：当前用户无权访问数据表中的字段</p><p>1146：数据表不存在</p><p>1147：未定义用户对数据表的访问权限</p><p>1149：SQL语句语法错误</p><p>1158：网络错误，出现读错误，请检查网络连接状况</p><p>1159：网络错误，读超时，请检查网络连接状况</p><p>1160：网络错误，出现写错误，请检查网络连接状况</p><p>1161：网络错误，写超时，请检查网络连接状况</p><p>1062：字段值重复，入库失败</p><p>1169：字段值重复，更新记录失败</p><p>1177：打开数据表失败</p><p>1180：提交事务失败</p><p>1181：回滚事务失败</p><p>1203：当前用户和数据库建立的连接已到达数据库的最大连接数，请增大可用的数据库连接数或重启数据库</p><p>1205：加锁超时</p><p>1211：当前用户没有创建用户的权限</p><p>1216：外键约束检查失败，更新子表记录失败</p><p>1217：外键约束检查失败，删除或修改主表记录失败</p><p>1226：当前用户使用的资源已超过所允许的资源，请重启数据库或重启服务器</p><p>1227：权限不足，您无权进行此操作</p><p>1235：MySQL版本过低，不具有本功能</p><p><br/></p>";s:8:"catelist";a:1:{i:68;a:4:{s:7:"cate_id";s:2:"68";s:5:"title";s:12:"赛事预告";s:10:"identifier";s:5:"match";s:3:"url";s:44:"http://zx.local/index.php?id=news&cate=match";}}s:4:"cate";a:4:{s:7:"cate_id";s:2:"68";s:5:"title";s:12:"赛事预告";s:10:"identifier";s:5:"match";s:3:"url";s:44:"http://zx.local/index.php?id=news&cate=match";}s:3:"url";s:33:"http://zx.local/index.php?id=1370";}}}